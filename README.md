Languages, Systems, and Data Lab at UC Santa Cruz
-------------------------------------------------

Website for the Languages, Systems, and Data Lab at UC Santa Cruz.

This website is largely based on [the Cornell PL website](https://github.com/cornell-pl/pl.cs.cornell.edu), with special thanks to 
[Rachit Nigam](https://rachitnigam.com) for technical and moral support!

## Making changes to the public site

Change the public website in three steps!

1. Change the markdown files and commit your changes to the `main` branch.
    * Any changes made to the `main` branch will be reflected in the public site after CI/CD runs.
1. Push your changes back to the repository.
1. Check the build status of your commit results in a :heavy_check_mark: build status and not a :x: build status!
    * You can find the build status for your commit
      on the [commit log](https://github.com/lsd-ucsc/lsd-ucsc.github.io-source/commits/main)
      or find details of the run on the [workflows](https://github.com/lsd-ucsc/lsd-ucsc.github.io-source/actions) page.
    * If you're unsure of whether your changes will build, then push to a new branch and make a pull request!

You don't need to install hugo because the public site has CI/CD set up. To see how to [build the site locally](#building-the-site-locally), click or scroll to the bottom.

### Adding news items

Edit the [news file][news] using one of the formats.
See the examples in the file.

[news]: content/home/news.md

### Adding a new person

You'll need the person's name as they want it to appear, title (e.g., "Ph.D. Student", "Assistant Professor", etc.), optionally a photo, and optionally a website URL.  If you don't provide a photo, a default image will appear.

Edit `content/home/faculty.md` or `content/home/students.md` and follow the format of existing entries.  If the person has a photo, add it to the `static/img/` directory.

### LSD Seminar

To create a new LSD Seminar page:

```
hugo new lsd-seminar/<term>.md
```

where `<term>` is of the form `2020fa`.

Next, edit the file generated in `content/lsd-seminar/<term>.md` and update the
link in `config.toml` for `lsd-seminar` to point to the latest webpage.

### Content Mangement

Most of the content is stored under `/content/home`.

- **about.md**: Content for the About widget on the home page.
- **news.md**: Latest news about the group. To add a new news item, use the
  format from the other items. Since the `[[news]]` list is ordered, make sure
  that the item is added to the top.
- **faculty.md**, **students.md**, **alumni.md**...: Content for various groups
  of members.

### Styling

The styling templates are stored under `layouts/`. Hugo uses a priority-based
override method for determining which template to use. By default, it uses
the template from `theme/academic/layouts` **unless** there is another template
of the same name (and directory structure) in `layout/`.

For example, if you want to override the styling in
`theme/academic/layout/foo/bar.html`, simply copy it to `layout/foo/bar.html`
and add your changes.

## Building the site locally

The website is generated by the [Hugo][hugo] website generator and uses the
[Academic][academic] theme. The theme is stored as a submodule under
`themes/academic/`.  We use an older version of the Academic theme, before it morphed into Wowchemy.  (Don't update the theme submodule unless you know what you're doing.)

1. Recursively clone the repository:
   ```
   git clone --recurse-submodules git@github.com:lsd-ucsc/lsd-ucsc.github.io-source.git
   ```
2. Install [Go][go] (ver >= 0.49.2) and [Hugo][hugo] (ver >= 1.11 && ver <= 49.2). **Note**: The website will not build with newer versions of Hugo.

3. Run `hugo server -w` to generate and serve the website locally.

### Docker version

If you don't feel like messing around with updating your go and hugo versions, and you already have docker installed, you can just run the site locally from inside of a container.

After recursively cloning the repository (as above in step #1), run

```
docker build -t NAME_OF_CONTAINER_HERE .
```

and then

```
docker run -it --rm -p 1313:1313 NAME_OF_CONTAINER_HERE
```

[hugo]: https://github.com/gohugoio/hugo/releases/tag/v0.49.2
[go]: https://golang.org/
[academic]: https://github.com/gcushen/hugo-academic
